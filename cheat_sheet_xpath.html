<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XPath Guide de Référence & Aide-mémoire</title>
    <style>
        /* ================================== */
        /* === STYLES GÉNÉRAUX & ÉCRAN === */
        /* ================================== */

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.4;
            color: #212529;
            /* Fond dégradé subtil pour la profondeur */
            background: linear-gradient(135deg, #c5d0db 0%, #dee2e6 100%);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 250mm;
            margin: 20px auto;
            background-color: transparent;
            padding: 10px;
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* 2 colonnes sur écran */
            gap: 20px;
        }

        h1 {
            grid-column: 1 / -1;
            text-align: center;
            font-family: 'Arial', sans-serif;
            color: #495057;
            border-bottom: 4px solid #adb5bd;
            padding-bottom: 12px;
            margin-bottom: 25px;
            font-size: 2.2em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        /* Style des "cartes" (Effet 3D/Flottant) */
        .cheat-sheet-section {
            padding: 15px;
            border-radius: 12px; 
            background-color: #e9ecef;
            border: 1px solid #dee2e6;
            margin-bottom: 15px;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15), 0 3px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
            page-break-inside: avoid;
            break-inside: avoid;
        }
        .cheat-sheet-section:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.15);
        }

        /* Étiquette de titre colorée */
        h2 {
            font-size: 1.2em;
            color: #212529;
            margin-top: 0;
            margin-bottom: 10px;
            padding-left: 10px;
            border-left: 6px solid; 
            font-weight: 700;
        }
        h3 {
            font-size: 1.05em;
            margin-top: 10px;
            margin-bottom: 5px;
            color: #495057;
        }
        
        /* CODES COULEURS POUR LES BLOCS DE SECTION (BORDURE DU TITRE) */
        .paths h2 { border-left-color: #007bff; color: #007bff; }
        .structure h2 { border-left-color: #dc3545; color: #dc3545; }
        .axes h2 { border-left-color: #6c757d; color: #6c757d; }
        .logic h2 { border-left-color: #28a745; color: #28a745; } 
        .position h2 { border-left-color: #ffc107; color: #856404; }
        .wildcards h2 { border-left-color: #17a2b8; color: #17a2b8; }
        .functions-section h2 { border-left-color: #6f42c1; color: #6f42c1; }

        /* Styles de Code INLINE */
        code {
            font-family: 'Consolas', 'Monaco', monospace;
            background-color: #f1f1f1;
            color: #c82333; /* Rouge sombre pour les commandes inline */
            padding: 2px 4px;
            border-radius: 4px;
            font-size: 0.85em;
            display: inline-block;
            overflow-wrap: break-word;
        }
        
        /* Styles de Code BLOCK (Couleurs harmonisées) */
        .code-block {
            display: block;
            padding: 8px;
            margin: 8px 0;
            border: 1px solid;
            white-space: pre-wrap;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85em;
        }

        /* COULEURS DES BLOCS DE CODE (Harmonisation avec la section) */
        .paths .code-block { background-color: #e6f0ff; color: #0056b3; border-color: #b8daff; }
        .structure .code-block { background-color: #f8d7da; color: #721c24; border-color: #f5c6cb; }
        .axes .code-block { background-color: #e2e3e5; color: #495057; border-color: #d6d8db; }
        .logic .code-block { background-color: #d4edda; color: #155724; border-color: #c3e6cb; }
        .position .code-block { background-color: #fff3cd; color: #856404; border-color: #ffeeba; }
        .wildcards .code-block { background-color: #d1ecf1; color: #0c5460; border-color: #bee5eb; }
        .functions-section .code-block { background-color: #e9d9f5; color: #49287d; border-color: #d6c1eb; }

        p { margin: 5px 0 10px 0; font-size: 0.95em; }
        ul { list-style-type: none; padding-left: 0; margin: 0 0 10px 0; }
        li { margin-bottom: 5px; }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            font-size: 0.85em;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        table th, table td {
            border-bottom: 1px solid #dee2e6;
            padding: 7px 10px;
            text-align: left;
            vertical-align: top;
        }

        /* TABLE HEADER DEFAULT STYLE (pour les blocs 3 et 4) */
        table th {
            background-color: #e9ecef;
            color: #495057;
            font-weight: 600;
        }
        
        /* NOUVEAU STYLE : TABLE HEADERS COORDONNÉS (pour les blocs 6, 7 et 8) */
        /* Bloc 6 (Position) */
        .position table th {
            background-color: #ffc107; /* Jaune Vif */
            color: #343a40; /* Texte Sombre */
        }
        /* Bloc 7 (Wildcards) */
        .wildcards table th {
            background-color: #17a2b8; /* Cyan Vif */
            color: #ffffff; /* Texte Blanc */
        }
        /* Bloc 8 (Fonctions) */
        .functions-section table th {
            background-color: #6f42c1; /* Violet Vif */
            color: #ffffff; /* Texte Blanc */
        }

        .alert-danger {
            background-color: #fff3cd; 
            color: #664d03;
            border: 1px solid #ffecb5;
            padding: 10px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
            font-size: 0.9em;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        
        /* Styles du Footer */
        footer {
            grid-column: 1 / -1; 
            padding-top: 20px;
            text-align: center;
        }
        footer p {
            margin: 10px 0 0 0; 
            font-size: 0.8em; 
            color: #000000; 
        }
		.download-link {
			text-align: center; /* Aligner à droite sous le titre principal */
			margin-top: -5px; /* Monter légèrement sous le titre */
			margin-bottom: 20px;
		}

		.download-link a {
			display: inline-block;
			padding: 5px 10px;
			background-color: #3e8e41; /* Vert */
			color: white;
			text-decoration: none;
			border-radius: 5px;
			font-weight: bold;
			font-size: 0.9em;
		}

 /* ================================== */
/* === NOUVEAUX STYLES D'IMPRESSION (A4) === */
/* ================================== */

@media print {
    @page {
        size: A4 portrait;
        margin: 10mm; /* Augmenté légèrement pour la lisibilité */
    }
	.download-link {
        display: none; /* Cachez le lien en mode impression */
    }
    body {
        line-height: 1.2;
        font-size: 10pt; /* Augmenté à 10pt pour meilleure lisibilité */
        padding: 0;
        margin: 0;
        background: #fff;
        /* Force l'impression des couleurs de fond (important pour les TH et blocs de code) */
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }

    .container {
        width: 100%;
        max-width: none;
        margin: 0;
        padding: 0;
        /* RETOUR À LA GRILLE 2 COLONNES (PLUS STABLE) */
        display: grid;
        grid-template-columns: repeat(2, 1fr); 
        gap: 8mm; /* Écart réduit pour l'impression */
        box-shadow: none;
    }

    h1 {
        grid-column: 1 / -1;
        margin-bottom: 5mm;
        font-size: 1.6em;
        color: #000;
        border-bottom-color: #000;
    }

    .cheat-sheet-section {
        box-shadow: none;
        border: 1px solid #ccc;
        background-color: #f7f7f7;
        padding: 6px; /* Réduit le padding */
        margin-bottom: 5px; /* Réduit la marge */
        break-inside: avoid; /* Maintenu pour éviter la coupure du bloc */
        page-break-inside: avoid; /* Assure la compatibilité */
        transform: none;
        border-radius: 3px; /* Réduit l'arrondi */
    }

    /* Réduction de la taille de la police dans les éléments internes pour gagner de la place */
    p, ul, li { font-size: 0.9em; margin: 3px 0; } 
    h2 { margin-bottom: 5px; font-size: 1.1em; }
    
    .code-block {
        font-size: 0.75em;
        padding: 3px;
        margin: 3px 0;
        box-shadow: none;
        /* Assure que le code soit noir sur fond coloré (grâce à print-color-adjust: exact) */
    }
    
    table { font-size: 0.8em; }
    table th, table td { padding: 4px 6px; }

    /* NOUVELLE RÈGLE : Assure que les en-têtes de table colorés restent visibles et nets */
    .cheat-sheet-section table th {
        color: #fff !important; /* Texte blanc sur fond de couleur vive */
    }

    /* Ajuste le footer pour s'étendre sur toute la largeur */
    footer {
        grid-column: 1 / -1;
        margin-top: 5mm;
        border-top: 1px solid #ccc;
        padding-top: 3px;
    }
}    
	</style>
</head>
<body>
    <h1>XPath : Guide de Référence & Aide-mémoire</h1>
    <p class="download-link">
		<a href="downloads/Aide-mémoire-Xpath.pdf" download="Aide-mémoire-Xpath.pdf" title="Télécharger le document en format PDF (pour impression)">
			⬇️ Télécharger l'Aide-mémoire XPath (PDF, 2 pages)
		</a>
	</p>
<div class="container">
    <div class="cheat-sheet-section paths">
        <h2>1. Chemins Absolus & Relatifs</h2>
        <p>Un chemin absolu part de la racine. Très précis, mais fragile en cas de modification du DOM.</p>
        <div class="code-block">/html/body/div[1]/span/div/div/section/p[2]</div>
        <p>Un chemin relatif (// ou .) commence n'importe où. Plus robuste.</p>
        <div class="code-block">//div[@class='menu']/a[@id='accueil']</div>
    </div>
    
    <div class="cheat-sheet-section paths">
        <h2>2. Séparateurs et Chemin d'Accès</h2>
        <ul>
            <li>/ (Slash simple) : Sépare un nœud de son enfant direct. Au début, désigne la racine.
                <div class="code-block">/html/body/div</div>
            </li>
            <li>// (Double Slash) : Sépare un nœud de n'importe lequel de ses descendants (n'importe où).
                <div class="code-block">//div[@class='card']//a</div>
            </li>
        </ul>
    </div>

    <div class="cheat-sheet-section structure">
        <h2>3. Structure Fondamentale</h2>
        <p>Une étape de localisation est composée de 3 éléments :<br><code>Axe::Test\_de\_Nœud[Prédicat]</code></p>
        <ul>
            <li>Axe (Direction) : Ex: child:: (par défaut), parent::, attribute::.</li>
            <li>Test de Nœud : Ex: div, span, input, * (tout élément).</li>
            <li>Prédicat (Filtre) : Ex: [@class='menu'], [@id='valeur'], [1].</li>
        </ul>
        <p><strong>Exemple (Les 3 éléments) :</strong></p>
        <div class="code-block">parent::div[@class='menu']</div>
    </div>

    <div class="cheat-sheet-section axes">
	    <h2>4. Utilisation d'index</h2>
        
        <h3>Position et Stabilité</h3>
        <ul>
		<li>Index de position ://li[3] ou //li[last()].</li>
        <li>Fonction position() ://li[position() > 5].</li>
        </ul>
        <div class="alert-danger">
            ⚠️ Danger de l'Index : L'utilisation d'index numériques (comme [1]) est extrêmement fragile. Si un élément est ajouté ou retiré, le chemin casse. Privilégiez les attributs et les fonctions texte pour la stabilité.
        </div>

    </div>
    
    <div class="cheat-sheet-section logic">
        <h2>5. Opérateurs & Prédicats Avancés</h2>
        <h3>Opérateurs Logiques</h3>
        <p>Utilisés dans les prédicats pour combiner des conditions :</p>
        <ul>
            <li>AND : Les deux conditions doivent être vraies.
                <div class="code-block">//input[@type='text' and @id='prenom']</div>
            </li>
            <li>OR : Au moins une condition doit être vraie.
                <div class="code-block">//button[@name='Ajouter' or @name='Supprimer']</div>
            </li>
        </ul>
        <h3>Prédicats Complexes</h3>
        <ul>
            <li>Prédicat sur un descendant :
                <div class="code-block">//div[.//span[@class='active']]</div>
            </li>
            <li>Filtre basé sur l'enfant direct :
                <div class="code-block">//tr[./td[@class='type']]</div>
            </li>
			<li>Filtre basé sur un descendant avec opérateur logique :
                <div class="code-block">//div[.//a[@class='link' and text()='Détails']]</div>
            </li>
        </ul>
    </div>
    
<div class="cheat-sheet-section axes">
    <h2>6. Axes de Navigation (Relations)</h2>
    <p>Les axes définissent la direction de la navigation par rapport au nœud courant. Ils sont fondamentaux pour localiser des éléments parents, frères, ou descendants indirects.</p>
    <table>
        <thead>
            <tr>
                <th>Axe</th>
                <th>Abr.</th>
                <th>Rôle</th>
            </tr>
        </thead>
        <tbody>
			<tr>
				<td>child::</td>
				<td>(omis)</td>
				<td>Nœuds enfants directs.</td>
			</tr>
			<tr>
				<td>parent::</td>
				<td>..</td>
				<td>Nœud parent.</td>
			</tr>
			<tr>
				<td>self::</td>
				<td>.</td>
				<td>Le nœud courant.</td>
			</tr>
			<tr>
				<td>attribute::</td>
				<td>@</td>
				<td>Nœuds attributs.</td>
			</tr>
			<tr>
				<td>descendant::</td>
				<td>//</td>
				<td>Tous les descendants.</td>
			</tr>
            <tr>
                <td>ancestor::</td>
                <td></td>
                <td>Tous les ancêtres du nœud courant.</td>
            </tr>
            <tr>
                <td>following-sibling::</td>
                <td></td>
                <td>Frères/sœurs qui apparaissent APRÈS le nœud courant.</td>
            </tr>
            <tr>
                <td>preceding-sibling::</td>
                <td></td>
                <td>Frères/sœurs qui apparaissent AVANT le nœud courant.</td>
            </tr>
            <tr>
                <td>following::</td>
                <td></td>
                <td>Tous les nœuds suivants.</td>
            </tr>
            <tr>
                <td>preceding::</td>
                <td></td>
                <td>Tous les nœuds précédents.</td>
            </tr>
        </tbody>
    </table>
</div>
    <div class="cheat-sheet-section wildcards">
        <h2>7. Sélecteurs Spéciaux & opérateurs</h2>
        <p>Utilisation de caractères génériques (wildcards) pour trouver des éléments ou attributs avec souplesse.</p>
        <table>
            <thead>
                <tr>
                    <th>Sélecteur</th>
                    <th>Rôle</th>
                    <th>Exemple</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>*</td>
                    <td>Sélectionne n'importe quel élément.</td>
                    <td><code class="code-block">//div/*/a</code></td>
                </tr>
                <tr>
                    <td>@*</td>
                    <td>Sélectionne un élément avec n'importe quel attribut.</td>
                    <td><code class="code-block">//button[@*]</code></td>
                </tr>
                <tr>
                    <td>//text()</td>
                    <td>Sélectionne uniquement le contenu textuel du nœud.</td>
                    <td><code class="code-block">//p[1]/text()</code></td>
                </tr>
            </tbody>
        </table>
		        <h3>Opérateurs de Comparaison et Types de Nœuds</h3>
        <table>
            <thead>
                <tr>
                    <th>Opérateur</th>
                    <th>Signification</th>
                    <th>Type de Nœud</th>
                    <th>Explication</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>=</td>
                    <td>Égalité</td>
                    <td>element</td>
                    <td>Sélectionne une balise HTML/XML (Ex: div).</td>
                </tr>
                <tr>
                    <td>!=</td>
                    <td>Non Égalité</td>
                    <td>attribute</td>
                    <td>Sélectionne un attribut (Ex: @id).</td>
                </tr>
                <tr>
                    <td>&lt;, &gt;</td>
                    <td>Inférieur, Supérieur</td>
                    <td>text()</td>
                    <td>Sélectionne le contenu textuel.</td>
                </tr>
                <tr>
                    <td>&lt;=, &gt;=</td>
                    <td>Inf. ou Ég., Sup. ou Ég.</td>
                    <td>comment()</td>
                    <td>Sélectionne un commentaire.</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="cheat-sheet-section functions-section">
        <h2>8. Fonctions Courantes (Texte)</h2>
        <table>
            <thead>
                <tr>
                    <th>Fonction</th>
                    <th>Rôle</th>
                    <th>Exemple</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>contains(s, sub)</td>
                    <td>Vrai si s contient sub.</td>
                    <td><code class="code-block">//p[contains(text(), 'partiel')]</code></td>
                </tr>
                <tr>
                    <td>starts-with(s, sub)</td>
                    <td>Vrai si s commence par sub.</td>
                    <td><code class="code-block">//input[starts-with(@id, 'utilisateur')]</code></td>
                </tr>
                <tr>
                    <td>normalize-space(s)</td>
                    <td>Nettoie les espaces multiples et début/fin.</td>
                    <td><code class="code-block">//div[normalize-space(text())='Texte']</code></td>
                </tr>
                <tr>
                    <td>concat(s1, s2, ...)</td>
                    <td>Concatène des chaînes.</td>
                    <td><code class="code-block">concat('Nom: ', @nom)</code></td>
                </tr>
                <tr>
                    <td>substring(s, start, len)</td>
                    <td>Extrait une sous-chaîne (position 1-basée).</td>
                    <td><code class="code-block">substring('ABCD', 2, 2) → 'BC'</code></td>
                </tr>
                <tr>
                    <td>substring-before(s, delim)</td>
                    <td>Extrait avant le délimiteur.</td>
                    <td><code class="code-block">substring-before('nom@dom.com', '@')</code></td>
                </tr>
                <tr>
                    <td>substring-after(s, delim)</td>
                    <td>Extrait après le délimiteur.</td>
                    <td><code class="code-block">substring-after('nom@dom.com', '@')</code></td>
                </tr>
            </tbody>
        </table>
    </div>

</div>

<footer>
    <p>
        &copy; Talel Zid | Version 1.1 — Octobre 2025 | Basé sur XPath 2.0.
		<br />Pour usage personnel ou éducatif seulement.
    </p>
</footer>

</body>
</html>
